



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="../images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="绯色鱼的博客" href="https://colsons.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="绯色鱼的博客" href="https://colsons.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="绯色鱼的博客" href="https://colsons.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="../css/app.css?v=0.2.5">

  
  <meta name="keywords" content="python,tensorFlow" />


<link rel="canonical" href="https://colsons.github.io/archives/68fa613c.html">



  <title>
「转载」Bert中文情感分类分析-tf1.14 - 深度学习 |
Lab Chen = 绯色鱼的博客</title>
<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">「转载」Bert中文情感分类分析-tf1.14
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-09-04 09:27:48">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-09-04T09:27:48+08:00">2021-09-04</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Lab Chen</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipewf5l51j20zk0m8b29.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipexj2jgzj20zk0m8b09.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclwrdwyaj20zk0m8are.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipesx5fdwj20zk0m81kx.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="../index.html">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="../categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="item" rel="index" title="In 深度学习"><span itemprop="name">深度学习</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://colsons.github.io/archives/68fa613c.html">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="../images/avatar.jpg">
    <meta itemprop="name" content="绯色鱼">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="绯色鱼的博客">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p>项目实现过程中对于一些处理做了更细致说明。如有不明白的可以去看原贴。</p>
<p><span id="more"></span></p>
<p>这里对 bert 不做介绍，主要介绍代码运行环境和数据集变换。</p>
<p>原贴：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2ODEyOTkwL2FydGljbGUvZGV0YWlscy8xMDIzMTMzMjI/dXRtX21lZGl1bT1kaXN0cmlidXRlLnBjX2FnZ3BhZ2Vfc2VhcmNoX3Jlc3VsdC5ub25lLXRhc2stYmxvZy0yfmFsbH5maXJzdF9yYW5rX3YyfnJhbmtfdjI1LTItMTAyMzEzMzIyLm5vbmVjYXNl">点击，进入通道</span></p>
<p>资源地址：</p>
<p>bert 模型文件：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS1yZXNlYXJjaC9iZXJ0">https://github.com/google-research/bert</span></p>
<p>预训练模型：<span class="exturl" data-url="aHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL2JlcnRfbW9kZWxzLzIwMThfMTFfMDMvY2hpbmVzZV9MLTEyX0gtNzY4X0EtMTIuemlw">https://storage.googleapis.com/bert_models/2018_11_03/chinese_L-12_H-768_A-12.zip</span></p>
<p>首先我的环境：<br />
<strong>win10 64 位系统 python3.6 TensorFlow=1.14.0（GPU 版本）CUDA=10.0</strong><br />
 其他可能版本影响不大的模板：pandas=1.0.5</p>
<p>电脑配置不够，可以适当减少参数大小，下面会具体说明。</p>
<h1 id="开始"><a class="anchor" href="#开始">#</a> 开始</h1>
<h2 id="1-数据预处理pre_datapy"><a class="anchor" href="#1-数据预处理pre_datapy">#</a> 1、数据预处理（pre_data.py）</h2>
<p>文件数据结构：<br />
<img data-src="https://img-blog.csdnimg.cn/20200805232000374.png" alt="在这里插入图片描述" /></p>
<pre class=" language-language-python"><code class="language-language-python">其他感觉运行用不到剔除了
# code   文件夹
# code/data    存放源数据与预处理数据
# code/data/nCoV_100k_train.labled.data  源数据
# code/chinese_L-12_H-768_A-12     存放预训练模型
# code/sim_model    存放各种结果
# code/init.py     空着就行
# code/pre_data.py  数据预处理文件，在code/data下会生成train.csv，dev.csv，test.csv
# code/modeling.py   模型文件
# code/optimization.py   训练优化器
# code/tokenization.py    训练端
# code/run_classifier.py  main文件（连接其他文件类的枝干部分）
# code/test.py   测试结果的转换

</code></pre>
<p><strong>第一步：准备数据，数据预处理，做好和训练模型数据接口工作</strong><br />
这一步非常重要，有处理错误会导致过程报错，然后反复调 bug（用这个的个人经历，惨痛的教训）<br />
我们写一个文件，要把数据处理成 n*2 的矩阵（n 是样本数），两列：一列是中文数据内容，一列是 label 标签。</p>
<pre class=" language-language-python"><code class="language-language-python"># code/pre_data.py
import pandas as pd
from sklearn.utils import shuffle
import re


def PREDATA():
    file = pd.read_csv('../data/nCoV_100k_train.labled.data', encoding='utf-8')
    file = file[file['情感倾向'].isin(['1', '-1', '0'])]
    data = pd.DataFrame(zip(file['情感倾向'].astype(int), file['微博中文内容']))

    # 数据量大，可以提取部分数据
    # data = data.iloc[0:2500]
    for i in range(data.shape[0]):
        try:
            if data['情感倾向'][i] == -1:
                data['情感倾向'][i] = 2
            if len(data['微博中文内容'][i]) < 10:
                data['微博中文内容'][i] = '0'
            else:
                data['微博中文内容'][i] = re.sub("[\s+\.\!\/_,$%^*(+\"\']+|[+——！，。？、~@#￥%……&*（）？?]", "", data['微博中文内容'][i])
        except:
            pass
    data = data[~data['微博中文内容'].isin(['0'])]
    data = shuffle(data)
    num = data.shape[0]
    data1 = data.iloc[:int(num * 0.8)]
    data2 = data.iloc[int(num * 0.8) + 1:int(num * 0.9)]
    data3 = data.iloc[int(num * 0.9) + 1:]
    data1.to_csv('../data/train.csv', index=None, header=None, encoding='utf-8')
    data2.to_csv('../data/test.csv', index=None, header=None, encoding='utf-8')
    data3.to_csv('../data/dev.csv', index=None, header=None, encoding='utf-8')


PREDATA()
</code></pre>
<p>源数据演示<br />
<img data-src="https://img-blog.csdnimg.cn/20200805223050799.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0ODUxMzU3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
该过程首先数据清洗，去掉了 label 中不是 [-1,0,1] 的数据，并且去除了内容长度少于 10 的语料，而且对满足条件的进行了正则化处理。<br />
最后处理完在 data 目录下生成 train.csv，dev.csv，test.csv 三个数据文件（数据量 8:1:1）<br />
三个文件为训练集，验证集，测试集，演示如下（三个 csv 文件格式相同，仅数据量不同）：<br />
<img data-src="https://img-blog.csdnimg.cn/20200805224111901.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0ODUxMzU3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p>PS1：正则化部分个人处理的，处理不好，大家可以自己发挥，数据处理好了，模型也会更准确。<br />
PS2：为什么 1，-1,0 中 - 1 变成了 2，emm 我忘记当时为什么这么做了，保持 - 1 不变也没事，不影响。<br />
PS3：切记 train.csv 等文件 没有 index，没有 header</p>
<h2 id="2-训练验证测试run_classifierpy"><a class="anchor" href="#2-训练验证测试run_classifierpy">#</a> 2、训练验证测试（run_classifier.py）</h2>
<p>modeling.py 是模型文件，optimization.py 是训练优化器，tokenization.py 是训练端<br />
这三个文件不用修改，主要是 run_classifier.py<br />
 你需要根据情况，调整参数<br />
参数说明如下：</p>
<pre class=" language-language-python"><code class="language-language-python"># 使用GPU情况
os.environ["CUDA_VISIBLE_DEVICES"] = "0"

# 利用flags设置参数（名称，默认值，描述）
flags = tf.flags
FLAGS = flags.FLAGS

# 数据集存放目录 : "data_dir"
flags.DEFINE_string(
    "data_dir", os.path.join(os.getcwd(), 'data'),
    "The input data dir. Should contain the .tsv files (or other data files) "
    "for the task.")

# 模型配置文件存放目录 : "bert_config_file"
flags.DEFINE_string(
    "bert_config_file", os.path.join(os.path.join(os.getcwd(), 'chinese_L-12_H-768_A-12'), 'bert_config.json'),
    "The config json file corresponding to the pre-trained BERT model. "
    "This specifies the model architecture.")

# 训练任务名字 : "task_name"
flags.DEFINE_string("task_name", 'sim', "The name of the task to train.")

# 模型字典存放目录 : "vocab_file"
flags.DEFINE_string("vocab_file", os.path.join(os.path.join(os.getcwd(), 'chinese_L-12_H-768_A-12'), 'vocab.txt'),
                    "The vocabulary file that the BERT model was trained on.")

# 结果存放目录 : "output_dir"
flags.DEFINE_string(
    "output_dir", os.path.join(os.getcwd(), 'sim_model'),
    "The output directory where the model checkpoints will be written.")

# 其他参数

flags.DEFINE_string(
    "init_checkpoint", None,
    "Initial checkpoint (usually from a pre-trained BERT model).")
#
flags.DEFINE_bool(
    "do_lower_case", True,
    "Whether to lower case the input text. Should be True for uncased "
    "models and False for cased models.")

# 最大总输入序列长度 : 模型输入的最长字符长度（1个汉字算一个）
flags.DEFINE_integer(
    "max_seq_length", 64,
    "The maximum total input sequence length after WordPiece tokenization. "
    "Sequences longer than this will be truncated, and sequences shorter "
    "than this will be padded.")

# 是否训练
flags.DEFINE_bool("do_train", False, "Whether to run training.")

# 是否验证（通常训练与验证一起进行）
flags.DEFINE_bool("do_eval", False, "Whether to run eval on the dev set.")

# 是否测试
flags.DEFINE_bool("do_predict", True, "Whether to run the model in inference mode on the test set.")

# 查看GPU内存，如果是为16GB，这里最大填写16（以下分别是三个过程的batch-size）
flags.DEFINE_integer("train_batch_size", 16, "Total batch size for training.")

flags.DEFINE_integer("eval_batch_size", 8, "Total batch size for eval.")

flags.DEFINE_integer("predict_batch_size", 8, "Total batch size for predict.")

# 学习率（可以自己调整，我的数据跑[1e-6,2e-5]之间1e-5的accuracy在局部峰值）
flags.DEFINE_float("learning_rate", 1e-5, "The initial learning rate for Adam.")

# epoch训练次数
flags.DEFINE_float("num_train_epochs", 100.0,
                   "Total number of training epochs to perform.")

# 慢热学习比例 : 例 设置0.1 则0.1 * epoch = 10 每10个epoch调整一次lr（类似动态学习率法）
flags.DEFINE_float(
    "warmup_proportion", 0.1,
    "Proportion of training to perform linear learning rate warmup for. "
    "E.g., 0.1 = 10% of training.")

# 每多少步保存一下ckpt，防止中断前功尽弃
flags.DEFINE_integer("save_checkpoints_steps", 1000,
                     "How often to save the model checkpoint.")

# # 每个评估单元调用中要执行多少步骤
flags.DEFINE_integer("iterations_per_loop", 1000,
                     "How many steps to make in each estimator call.")

# TPG使用情况
flags.DEFINE_bool("use_tpu", False, "Whether to use TPU or GPU/CPU.")

tf.flags.DEFINE_string("master", None, "[Optional] TensorFlow master URL.")

flags.DEFINE_integer(
    "num_tpu_cores", 8,
    "Only used if `use_tpu` is True. Total number of TPU cores to use.")
</code></pre>
<p>另外数据接口做了修改，修改版的 run_classifier.py<br />
 链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMU1ZWUd5RjQ4ZVRjcDFYek00SzVzckE=">https://pan.baidu.com/s/1MYYGyF48eTcp1XzM4K5srA</span><br />
 提取码：mh32</p>
<p><img data-src="https://img-blog.csdnimg.cn/20200805233114643.png" alt="在这里插入图片描述" /><br />
均调整为 True，即可完成训练，验证，测试过程（测试可单独进行）</p>
<p>训练结果的指标存放在 code/sim_model/eval_results.txt 中，<br />
测试结果存放在 code/sim_model/test_results.tsv 中，存放每一个类别概率：<br />
<img data-src="https://img-blog.csdnimg.cn/20200805233409122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0ODUxMzU3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
 PS1：如果运行报错内存不够 train_batch_size，max_seq_length 参数大小可以减小。<br />
PS2：文件目录如果用 os 那就不要出现 data/tarin.py 这种带‘/’的（会出问题）</p>
<h2 id="3-测试结果转换testpy"><a class="anchor" href="#3-测试结果转换testpy">#</a> *3、测试结果转换（<span class="exturl" data-url="aHR0cDovL3Rlc3QucHk=">test.py</span>）</h2>
<p>该步骤可省略，如果你对结果不满意，可转换成这样的类别文件：<br />
<img data-src="https://img-blog.csdnimg.cn/20200805233810180.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0ODUxMzU3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />这样就简单明了了</p>
<pre class=" language-language-python"><code class="language-language-python"># code/test.py
import os
import pandas as pd

if __name__ == '__main__':
    path = "sim_model/"
    pd_all = pd.read_csv(os.path.join(path, "test_results.tsv"), sep='\t', header=None)

    data = pd.DataFrame(columns=['polarity'])
    print(data)
    print(pd_all.shape)

    for index in pd_all.index:
        neutral_score = pd_all.loc[index].values[0]
        positive_score = pd_all.loc[index].values[1]
        negative_score = pd_all.loc[index].values[2]

        if max(neutral_score, positive_score, negative_score) == neutral_score:
            data.loc[index + 1] = ["0,neutral"]
        elif max(neutral_score, positive_score, negative_score) == positive_score:
            data.loc[index + 1] = ["1,positive"]
        else:
            data.loc[index + 1] = ["2,negative"]

    data.to_csv(os.path.join(path, "pre_sample.tsv"), sep='\t')
    print(data)
</code></pre>
<p>这个文件最后保存在 code/sim_model/pre_sample.tsv</p>
<p>完整文件发在交流群</p>
<p><img data-src="https://img-blog.csdnimg.cn/20200805234157857.png" alt="在这里插入图片描述" /></p>

      <div class="tags">
          <a href="../tags/python/" rel="tag"><i class="ic i-tag"></i> python</a>
          <a href="../tags/tensorFlow/" rel="tag"><i class="ic i-tag"></i> tensorFlow</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2021-09-04 11:01:48" itemprop="dateModified" datetime="2021-09-04T11:01:48+08:00">2021-09-04</time>
  </span>
  <span id="archives/68fa613c.html" class="item leancloud_visitors" data-flag-title="「转载」Bert中文情感分类分析-tf1.14" title="Views">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">Views</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">times</span>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> Donate</button>
  <p>Give me a cup of [coffee]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="../images/wechatpay.png" alt="绯色鱼 WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div>
        <img data-src="../images/alipay.png" alt="绯色鱼 Alipay">
        <p>Alipay</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>Post author:  </strong>绯色鱼 <i class="ic i-at"><em>@</em></i>绯色鱼的博客
  </li>
  <li class="link">
    <strong>Post link: </strong>
    <a href="../https:/colsons.github.io/archives/68fa613c.html" title="「转载」Bert中文情感分类分析-tf1.14">https://colsons.github.io/archives/68fa613c.html</a>
  </li>
  <li class="license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="8a5cf894.html" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipetv6p75j20zk0m8x6p.jpg" title="django2.2+Ubuntu+nginx+uwsgi">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> 部署</span>
  <h3>django2.2+Ubuntu+nginx+uwsgi</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="d71e34f5.html" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeudstjqj20zk0m8k3r.jpg" title="Django的路由关系与静态资源路径设置">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> 后端</span>
  <h3>Django的路由关系与静态资源路径设置</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B"><span class="toc-number">1.</span> <span class="toc-text"> 开始</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86pre_datapy"><span class="toc-number">1.1.</span> <span class="toc-text"> 1、数据预处理（pre_data.py）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AE%AD%E7%BB%83%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95run_classifierpy"><span class="toc-number">1.2.</span> <span class="toc-text"> 2、训练验证测试（run_classifier.py）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C%E8%BD%AC%E6%8D%A2testpy"><span class="toc-number">1.3.</span> <span class="toc-text"> *3、测试结果转换（test.py）</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li class="active"><a href="" rel="bookmark" title="「转载」Bert中文情感分类分析-tf1.14">「转载」Bert中文情感分类分析-tf1.14</a></li><li><a href="bc57630c.html" rel="bookmark" title="LSTM 昇腾平台全框架指南">LSTM 昇腾平台全框架指南</a></li><li><a href="14a38ce5.html" rel="bookmark" title="NLP-Transformers-多标签多分类模型搭建与训练">NLP-Transformers-多标签多分类模型搭建与训练</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="绯色鱼"
      data-src="../images/avatar.jpg">
  <p class="name" itemprop="name">绯色鱼</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="../archives/">
        <span class="count">37</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="../categories/">
        <span class="count">10</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="../tags/">
        <span class="count">31</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NvbHNvbnM=" title="https:&#x2F;&#x2F;github.com&#x2F;colsons"><i class="ic i-github"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOjMzNTYwMTYzNjlAcXEuY29t" title="mailto:3356016369@qq.com"><i class="ic i-envelope"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="../index.html" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>汇总</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="../categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

        
  <li class="item">
    <a href="../tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

        
  <li class="item">
    <a href="../archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="../friends/" rel="section"><i class="ic i-heart"></i>码友</a>
  </li>

    
  <li class="item">
    <a href="../links/" rel="section"><i class="ic i-magic"></i>链接</a>
  </li>

    
  <li class="item">
    <a href="../about/" rel="section"><i class="ic i-user"></i>关于</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="8a5cf894.html" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="d71e34f5.html" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div>
  <h2>Recent Comments</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">绯色鱼 @ Lab Chen</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'archives/68fa613c.html',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    copyright: 'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="../js/app.js?v=0.2.5"></script>




</body>
</html>
